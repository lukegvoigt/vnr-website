---
import Layout from '../layouts/Layout.astro';
import { getCollection } from 'astro:content';

const allPosts = await getCollection('posts');
const posts = allPosts.sort((a, b) => b.data.date.getTime() - a.data.date.getTime());
---

<Layout title="News & Updates | Valdosta North Rotary Club">
  <header class="bg-rotary-royal-blue text-white p-4 shadow-md sticky top-0 z-50">
    <div class="container mx-auto flex justify-between items-center">
      <a href="/">
        <img src="https://i.ibb.co/wFFxwLcL/Rotary-Logo-EN21-white.png" alt="Rotary International Logo" class="h-16" />
      </a>
      <nav>
        <a href="/" class="px-4 hover:text-rotary-gold transition-colors">Home</a>
        <a href="/#about" class="px-4 hover:text-rotary-gold transition-colors">About Us</a>
        <a href="/#visiting" class="px-4 hover:text-rotary-gold transition-colors">Visit Us</a>
        <a href="/news" class="px-4 text-rotary-gold">News</a>
      </nav>
    </div>
  </header>

  <main>
    <section class="py-20 bg-gray-50">
      <div class="container mx-auto px-6">
        <h1 class="text-5xl font-bold text-rotary-royal-blue mb-4 text-center">Club News & Updates</h1>
        <p class="text-xl text-gray-600 text-center mb-12">Stay informed about our latest activities, events, and community impact</p>
        
        <div class="max-w-4xl mx-auto space-y-8">
          {posts.map(post => (
            <article class="bg-white rounded-lg shadow-lg overflow-hidden transform hover:shadow-xl transition-shadow duration-300">
              <div class="p-8">
                <div class="flex items-center justify-between mb-4">
                  <p class="text-sm text-gray-500">{post.data.date.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })}</p>
                  <p class="text-sm text-rotary-royal-blue font-semibold">By {post.data.author}</p>
                </div>
                <h2 class="text-3xl font-bold text-rotary-royal-blue mb-4">
                  <a href={`/posts/${post.slug}`} class="hover:text-rotary-gold transition-colors">
                    {post.data.title}
                  </a>
                </h2>
                <p class="text-gray-700 text-lg leading-relaxed mb-6">{post.data.excerpt}</p>
                <a href={`/posts/${post.slug}`} class="inline-flex items-center font-bold text-rotary-gold hover:underline">
                  Read Full Article &rarr;
                </a>
              </div>
            </article>
          ))}
        </div>
      </div>
    </section>
  </main>

  <footer class="bg-rotary-royal-blue text-white py-6">
    <div class="container mx-auto text-center">
      <p>&copy; {new Date().getFullYear()} Valdosta North Rotary Club. All Rights Reserved.</p>
    </div>
  </footer>
</Layout>
